2022-04-02 04:28:06.777  INFO 1 --- [           main] c.e.apiGateway.ApiGatewayApplication     : Starting ApiGatewayApplication v0.0.1-SNAPSHOT using Java 11.0.14.1 on 988b8714871a with PID 1 (/ApiGateway.jar started by root in /)
2022-04-02 04:28:06.782  INFO 1 --- [           main] c.e.apiGateway.ApiGatewayApplication     : No active profile set, falling back to default profiles: default
2022-04-02 04:28:06.903  INFO 1 --- [           main] o.s.b.context.config.ConfigDataLoader    : Fetching config from server at : http://172.31.15.68:8888
2022-04-02 04:28:06.903  INFO 1 --- [           main] o.s.b.context.config.ConfigDataLoader    : Located environment: name=api-gateway, profiles=[default], label=null, version=ec749a49b22f1638620361872f9820796be5fae6, state=null
2022-04-02 04:28:10.451  INFO 1 --- [           main] faultConfiguringBeanFactoryPostProcessor : No bean named 'errorChannel' has been explicitly defined. Therefore, a default PublishSubscribeChannel will be created.
2022-04-02 04:28:10.497  INFO 1 --- [           main] faultConfiguringBeanFactoryPostProcessor : No bean named 'integrationHeaderChannelRegistry' has been explicitly defined. Therefore, a default DefaultHeaderChannelRegistry will be created.
2022-04-02 04:28:10.802  INFO 1 --- [           main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=607915b3-9839-3e6b-a989-39ac5f731648
2022-04-02 04:28:11.122  INFO 1 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.stream.config.BindersHealthIndicatorAutoConfiguration' of type [org.springframework.cloud.stream.config.BindersHealthIndicatorAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2022-04-02 04:28:11.133  INFO 1 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'bindersHealthContributor' of type [org.springframework.cloud.stream.config.BindersHealthIndicatorAutoConfiguration$BindersHealthContributor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2022-04-02 04:28:11.137  INFO 1 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'bindersHealthIndicatorListener' of type [org.springframework.cloud.stream.config.BindersHealthIndicatorAutoConfiguration$BindersHealthIndicatorListener] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2022-04-02 04:28:11.155  INFO 1 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.integration.config.IntegrationManagementConfiguration' of type [org.springframework.integration.config.IntegrationManagementConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2022-04-02 04:28:11.178  INFO 1 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'integrationChannelResolver' of type [org.springframework.integration.support.channel.BeanFactoryChannelResolver] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2022-04-02 04:28:11.220  INFO 1 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2022-04-02 04:28:11.227  INFO 1 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration$ReactorDeferringLoadBalancerFilterConfig' of type [org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration$ReactorDeferringLoadBalancerFilterConfig] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2022-04-02 04:28:11.228  INFO 1 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'reactorDeferringLoadBalancerExchangeFilterFunction' of type [org.springframework.cloud.client.loadbalancer.reactive.DeferringLoadBalancerExchangeFilterFunction] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2022-04-02 04:28:14.383  INFO 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [After]
2022-04-02 04:28:14.383  INFO 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Before]
2022-04-02 04:28:14.383  INFO 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Between]
2022-04-02 04:28:14.384  INFO 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Cookie]
2022-04-02 04:28:14.385  INFO 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Header]
2022-04-02 04:28:14.385  INFO 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Host]
2022-04-02 04:28:14.385  INFO 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Method]
2022-04-02 04:28:14.386  INFO 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Path]
2022-04-02 04:28:14.386  INFO 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Query]
2022-04-02 04:28:14.390  INFO 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [ReadBody]
2022-04-02 04:28:14.390  INFO 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [RemoteAddr]
2022-04-02 04:28:14.390  INFO 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Weight]
2022-04-02 04:28:14.391  INFO 1 --- [           main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [CloudFoundryRouteService]
2022-04-02 04:28:16.063  INFO 1 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 6 endpoint(s) beneath base path '/actuator'
2022-04-02 04:28:16.948  INFO 1 --- [           main] o.s.c.s.m.DirectWithAttributesChannel    : Channel 'api-gateway.springCloudBusInput' has 1 subscriber(s).
2022-04-02 04:28:17.257  INFO 1 --- [           main] DiscoveryClientOptionalArgsConfiguration : Eureka HTTP Client uses RestTemplate.
2022-04-02 04:28:17.513  WARN 1 --- [           main] iguration$LoadBalancerCaffeineWarnLogger : Spring Cloud LoadBalancer is currently working with the default cache. You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2022-04-02 04:28:17.735  INFO 1 --- [           main] o.s.i.endpoint.EventDrivenConsumer       : Adding {logging-channel-adapter:_org.springframework.integration.errorLogger} as a subscriber to the 'errorChannel' channel
2022-04-02 04:28:17.737  INFO 1 --- [           main] o.s.i.channel.PublishSubscribeChannel    : Channel 'api-gateway.errorChannel' has 1 subscriber(s).
2022-04-02 04:28:17.738  INFO 1 --- [           main] o.s.i.endpoint.EventDrivenConsumer       : started bean '_org.springframework.integration.errorLogger'
2022-04-02 04:28:17.757  INFO 1 --- [           main] o.s.c.n.eureka.InstanceInfoFactory       : Setting initial instance status as: STARTING
2022-04-02 04:28:17.999  INFO 1 --- [           main] com.netflix.discovery.DiscoveryClient    : Initializing Eureka in region us-east-1
2022-04-02 04:28:18.018  INFO 1 --- [           main] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-04-02 04:28:18.100  INFO 1 --- [           main] com.netflix.discovery.DiscoveryClient    : Disable delta property : false
2022-04-02 04:28:18.101  INFO 1 --- [           main] com.netflix.discovery.DiscoveryClient    : Single vip registry refresh property : null
2022-04-02 04:28:18.103  INFO 1 --- [           main] com.netflix.discovery.DiscoveryClient    : Force full registry fetch : false
2022-04-02 04:28:18.104  INFO 1 --- [           main] com.netflix.discovery.DiscoveryClient    : Application is null : false
2022-04-02 04:28:18.104  INFO 1 --- [           main] com.netflix.discovery.DiscoveryClient    : Registered Applications size is zero : true
2022-04-02 04:28:18.104  INFO 1 --- [           main] com.netflix.discovery.DiscoveryClient    : Application version is -1: true
2022-04-02 04:28:18.104  INFO 1 --- [           main] com.netflix.discovery.DiscoveryClient    : Getting all instance registry info from the eureka server
2022-04-02 04:28:18.776  INFO 1 --- [           main] com.netflix.discovery.DiscoveryClient    : The response status is 200
2022-04-02 04:28:18.786  INFO 1 --- [           main] com.netflix.discovery.DiscoveryClient    : Starting heartbeat executor: renew interval is: 30
2022-04-02 04:28:18.795  INFO 1 --- [           main] c.n.discovery.InstanceInfoReplicator     : InstanceInfoReplicator onDemand update allowed rate per min is 4
2022-04-02 04:28:18.817  INFO 1 --- [           main] com.netflix.discovery.DiscoveryClient    : Discovery Client initialized at timestamp 1648873698815 with initial instances count: 2
2022-04-02 04:28:18.825  INFO 1 --- [           main] o.s.c.n.e.s.EurekaServiceRegistry        : Registering application API-GATEWAY with eureka with status UP
2022-04-02 04:28:18.831  INFO 1 --- [           main] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1648873698831, current=UP, previous=STARTING]
2022-04-02 04:28:18.833  INFO 1 --- [nfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_API-GATEWAY/988b8714871a:api-gateway:8082: registering service...
2022-04-02 04:28:19.154  INFO 1 --- [nfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_API-GATEWAY/988b8714871a:api-gateway:8082 - registration status: 204
2022-04-02 04:28:19.177  INFO 1 --- [           main] o.s.c.s.binder.DefaultBinderFactory      : Creating binder: rabbit
2022-04-02 04:28:19.486  INFO 1 --- [           main] o.s.c.s.binder.DefaultBinderFactory      : Caching the binder: rabbit
2022-04-02 04:28:19.488  INFO 1 --- [           main] o.s.c.s.binder.DefaultBinderFactory      : Retrieving cached binder: rabbit
2022-04-02 04:28:19.617  INFO 1 --- [           main] c.s.b.r.p.RabbitExchangeQueueProvisioner : declaring queue for inbound: springCloudBus.anonymous.DA-sjPL_RGy50ZHP8w2sqA, bound to: springCloudBus
2022-04-02 04:28:19.631  INFO 1 --- [           main] o.s.a.r.c.CachingConnectionFactory       : Attempting to connect to: [172.31.15.68:5672]
2022-04-02 04:28:19.812  INFO 1 --- [           main] o.s.a.r.c.CachingConnectionFactory       : Created new connection: rabbitConnectionFactory#45d64d27:0/SimpleConnection@609e57da [delegate=amqp://appadmin@172.31.15.68:5672/, localPort= 42094]
2022-04-02 04:28:19.948  INFO 1 --- [           main] o.s.c.stream.binder.BinderErrorChannel   : Channel 'springCloudBus.anonymous.DA-sjPL_RGy50ZHP8w2sqA.errors' has 1 subscriber(s).
2022-04-02 04:28:19.952  INFO 1 --- [           main] o.s.c.stream.binder.BinderErrorChannel   : Channel 'springCloudBus.anonymous.DA-sjPL_RGy50ZHP8w2sqA.errors' has 2 subscriber(s).
2022-04-02 04:28:19.998  INFO 1 --- [           main] o.s.i.a.i.AmqpInboundChannelAdapter      : started bean 'inbound.springCloudBus.anonymous.DA-sjPL_RGy50ZHP8w2sqA'
2022-04-02 04:28:20.254  INFO 1 --- [           main] o.s.b.web.embedded.netty.NettyWebServer  : Netty started on port 8082
2022-04-02 04:28:20.255  INFO 1 --- [           main] .s.c.n.e.s.EurekaAutoServiceRegistration : Updating port to 8082
2022-04-02 04:28:20.363  INFO 1 --- [           main] c.e.apiGateway.ApiGatewayApplication     : Started ApiGatewayApplication in 16.348 seconds (JVM running for 17.804)
2022-04-02 04:28:43.975  INFO 1 --- [or-http-epoll-2] com.example.apiGateway.MyPreFilter       : my first pre-filter is executed...
2022-04-02 04:28:43.983  INFO 1 --- [or-http-epoll-2] com.example.apiGateway.MyPreFilter       : Request Path :
2022-04-02 04:28:43.986  INFO 1 --- [or-http-epoll-2] com.example.apiGateway.MyPreFilter       : Accept application/json
2022-04-02 04:28:43.986  INFO 1 --- [or-http-epoll-2] com.example.apiGateway.MyPreFilter       : Content-Type application/json
2022-04-02 04:28:43.987  INFO 1 --- [or-http-epoll-2] com.example.apiGateway.MyPreFilter       : User-Agent PostmanRuntime/7.29.0
2022-04-02 04:28:43.987  INFO 1 --- [or-http-epoll-2] com.example.apiGateway.MyPreFilter       : Postman-Token bb768594-2922-4a9a-bc53-b4e64b1ccc56
2022-04-02 04:28:43.987  INFO 1 --- [or-http-epoll-2] com.example.apiGateway.MyPreFilter       : Host ec2-3-220-43-155.compute-1.amazonaws.com:8082
2022-04-02 04:28:43.987  INFO 1 --- [or-http-epoll-2] com.example.apiGateway.MyPreFilter       : Accept-Encoding gzip, deflate, br
2022-04-02 04:28:43.989  INFO 1 --- [or-http-epoll-2] com.example.apiGateway.MyPreFilter       : Connection keep-alive
2022-04-02 04:28:43.989  INFO 1 --- [or-http-epoll-2] com.example.apiGateway.MyPreFilter       : content-length 111
2022-04-02 04:28:44.220  INFO 1 --- [or-http-epoll-2] c.e.a.GlobalFilterConfiguration          : executing 2nd pre-filter...
2022-04-02 04:28:44.221  INFO 1 --- [or-http-epoll-2] c.e.a.GlobalFilterConfiguration          : executing 3rd pre-filter...
2022-04-02 04:28:44.222  INFO 1 --- [or-http-epoll-2] c.e.a.GlobalFilterConfiguration          : executing 4th pre-filter...
2022-04-02 04:28:44.804 ERROR 1 --- [or-http-epoll-2] a.w.r.e.AbstractErrorWebExceptionHandler : [dfef0a48-1]  500 Server Error for HTTP POST "/users-ws/users"

java.net.UnknownHostException: Failed to resolve 'a7a15c3e42c4' after 2 queries
        at io.netty.resolver.dns.DnsResolveContext.finishResolve(DnsResolveContext.java:1047) ~[netty-resolver-dns-4.1.73.Final.jar!/:4.1.73.Final]
        Suppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException:
Error has been observed at the following site(s):
        *__checkpoint ⇢ org.springframework.boot.actuate.web.trace.reactive.HttpTraceWebFilter [DefaultWebFilterChain]
        *__checkpoint ⇢ org.springframework.cloud.gateway.filter.WeightCalculatorWebFilter [DefaultWebFilterChain]
        *__checkpoint ⇢ org.springframework.boot.actuate.metrics.web.reactive.server.MetricsWebFilter [DefaultWebFilterChain]
        *__checkpoint ⇢ HTTP POST "/users-ws/users" [ExceptionHandlingWebHandler]
Original Stack Trace:
                at io.netty.resolver.dns.DnsResolveContext.finishResolve(DnsResolveContext.java:1047) ~[netty-resolver-dns-4.1.73.Final.jar!/:4.1.73.Final]
                at io.netty.resolver.dns.DnsResolveContext.tryToFinishResolve(DnsResolveContext.java:1000) ~[netty-resolver-dns-4.1.73.Final.jar!/:4.1.73.Final]
                at io.netty.resolver.dns.DnsResolveContext.query(DnsResolveContext.java:418) ~[netty-resolver-dns-4.1.73.Final.jar!/:4.1.73.Final]
                at io.netty.resolver.dns.DnsResolveContext.onResponse(DnsResolveContext.java:629) ~[netty-resolver-dns-4.1.73.Final.jar!/:4.1.73.Final]
                at io.netty.resolver.dns.DnsResolveContext.access$400(DnsResolveContext.java:66) ~[netty-resolver-dns-4.1.73.Final.jar!/:4.1.73.Final]
                at io.netty.resolver.dns.DnsResolveContext$2.operationComplete(DnsResolveContext.java:462) ~[netty-resolver-dns-4.1.73.Final.jar!/:4.1.73.Final]
                at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:578) ~[netty-common-4.1.73.Final.jar!/:4.1.73.Final]
                at io.netty.util.concurrent.DefaultPromise.notifyListeners0(DefaultPromise.java:571) ~[netty-common-4.1.73.Final.jar!/:4.1.73.Final]
                at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:550) ~[netty-common-4.1.73.Final.jar!/:4.1.73.Final]
                at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:491) ~[netty-common-4.1.73.Final.jar!/:4.1.73.Final]
                at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:616) ~[netty-common-4.1.73.Final.jar!/:4.1.73.Final]
                at io.netty.util.concurrent.DefaultPromise.setSuccess0(DefaultPromise.java:605) ~[netty-common-4.1.73.Final.jar!/:4.1.73.Final]
                at io.netty.util.concurrent.DefaultPromise.trySuccess(DefaultPromise.java:104) ~[netty-common-4.1.73.Final.jar!/:4.1.73.Final]
                at io.netty.resolver.dns.DnsQueryContext.trySuccess(DnsQueryContext.java:200) ~[netty-resolver-dns-4.1.73.Final.jar!/:4.1.73.Final]
                at io.netty.resolver.dns.DnsQueryContext.finish(DnsQueryContext.java:192) ~[netty-resolver-dns-4.1.73.Final.jar!/:4.1.73.Final]
                at io.netty.resolver.dns.DnsNameResolver$DnsResponseHandler.channelRead(DnsNameResolver.java:1301) ~[netty-resolver-dns-4.1.73.Final.jar!/:4.1.73.Final]
                at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379) ~[netty-transport-4.1.73.Final.jar!/:4.1.73.Final]
                at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365) ~[netty-transport-4.1.73.Final.jar!/:4.1.73.Final]
                at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357) ~[netty-transport-4.1.73.Final.jar!/:4.1.73.Final]
                at io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:103) ~[netty-codec-4.1.73.Final.jar!/:4.1.73.Final]
                at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379) ~[netty-transport-4.1.73.Final.jar!/:4.1.73.Final]
                at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365) ~[netty-transport-4.1.73.Final.jar!/:4.1.73.Final]
                at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357) ~[netty-transport-4.1.73.Final.jar!/:4.1.73.Final]
                at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410) ~[netty-transport-4.1.73.Final.jar!/:4.1.73.Final]
                at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379) ~[netty-transport-4.1.73.Final.jar!/:4.1.73.Final]
                at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365) ~[netty-transport-4.1.73.Final.jar!/:4.1.73.Final]
                at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919) ~[netty-transport-4.1.73.Final.jar!/:4.1.73.Final]
                at io.netty.channel.epoll.EpollDatagramChannel.processPacket(EpollDatagramChannel.java:618) ~[netty-transport-classes-epoll-4.1.73.Final.jar!/:4.1.73.Final]
                at io.netty.channel.epoll.EpollDatagramChannel.recvmsg(EpollDatagramChannel.java:653) ~[netty-transport-classes-epoll-4.1.73.Final.jar!/:4.1.73.Final]
                at io.netty.channel.epoll.EpollDatagramChannel.access$100(EpollDatagramChannel.java:56) ~[netty-transport-classes-epoll-4.1.73.Final.jar!/:4.1.73.Final]
                at io.netty.channel.epoll.EpollDatagramChannel$EpollDatagramChannelUnsafe.epollInReady(EpollDatagramChannel.java:492) ~[netty-transport-classes-epoll-4.1.73.Final.jar!/:4.1.73.Final]
                at io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe$1.run(AbstractEpollChannel.java:425) ~[netty-transport-classes-epoll-4.1.73.Final.jar!/:4.1.73.Final]
                at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:164) ~[netty-common-4.1.73.Final.jar!/:4.1.73.Final]
                at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:469) ~[netty-common-4.1.73.Final.jar!/:4.1.73.Final]
                at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:384) ~[netty-transport-classes-epoll-4.1.73.Final.jar!/:4.1.73.Final]
                at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:986) ~[netty-common-4.1.73.Final.jar!/:4.1.73.Final]
                at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.73.Final.jar!/:4.1.73.Final]
                at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.73.Final.jar!/:4.1.73.Final]
                at java.base/java.lang.Thread.run(Thread.java:829) ~[na:na]
